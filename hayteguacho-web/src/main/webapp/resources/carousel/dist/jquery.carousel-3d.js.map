{"version":3,"sources":["../.tmp/node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js","../.tmp/src/Carousel3d.js","../.tmp/src/Child.js","../.tmp/src/ChildrenWrapper.js","../src/jquery.resize.ex.js"],"names":[],"mappings":";;AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChJA,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AACd,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE;AACf,EAAE,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC;AACnC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO;AAClE,EAAE,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AACrC,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,GAAG;AAChC,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,GAAG;AAClC,IAAI,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC3C,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AACrE,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,GAAG;AAChC,QAAQ,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,GAAG;AAClC,QAAQ,QAAQ,CAAC,IAAI,EAAE;AACvB,MAAM,CAAC;AACP,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG;AAClB,EAAE,EAAE;AACJ,KAAK","file":"jquery.carousel-3d.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\n *\n *\n *\n * Copyright (c) 2015 PAIO\n * Licensed under the MIT license.\n */\n\n(function() {\n  'use strict';\n\n  var $ = window.jQuery;\n  var ChildrenWrapper = require('./ChildrenWrapper');\n  var Child = require('./Child');\n\n  /**\n   * constructor\n   * @param panel\n   * @constructor\n   */\n  var Carousel3d = function (carousel) {\n    this.el = carousel;\n    this._makeOption();\n\n    //create chlidrenWrapper, children\n    var $children = $(carousel).children();\n    var childrenWrapperObj = new ChildrenWrapper(this);\n    var currentIndex = 0;\n    this.appendChildrenWrapper(childrenWrapperObj);\n    $children.each(function (index, childContent) {\n      if ($(childContent).attr('selected')) {\n        currentIndex = index;\n      }\n      this.appendChild(childContent);\n    }.bind(this));\n\n    //create prev/next buttons\n    this._prevButton = $('<div data-prev-button></div>')[0];\n    $(this.el).append(this._prevButton);\n    $(this._prevButton).click(this.prev.bind(this));\n    this._nextButton = $('<div data-next-button></div>')[0];\n    $(this.el).append(this._nextButton);\n    $(this._nextButton).click(this.next.bind(this));\n\n    this.rotate(currentIndex);\n  };\n\n\n  /**\n   * Carousel-3D panel element\n   * @type {element}\n   */\n  Carousel3d.prototype.el = null;\n\n\n  /**\n   *\n   * @type {{animationDuration: number}}\n   */\n  Carousel3d.prototype.option = {\n    animationDuration: 1000\n  };\n\n\n  /**\n   * populate option\n   * @private\n   */\n  Carousel3d.prototype._makeOption = function () {\n    (function () {\n      var $wrapper = $('<div data-children-wrapper></div>').hide().appendTo(this.el);\n      var duration = $('<div data-child></div>').hide().appendTo($wrapper).css('transition-duration');\n      $wrapper.remove();\n      if (duration) {\n        if (duration.indexOf('ms') > 0) {\n          this.option.animationDuration = parseInt(duration);\n        }\n        else if (duration.indexOf('s') > 0) {\n          this.option.animationDuration = parseInt(duration) * 1000;\n        }\n      }\n    }.bind(this))();\n\n  };\n\n\n  /**\n   * append chlid\n   * @param content\n   */\n  Carousel3d.prototype.appendChild = function (content) {\n    this._childrenWrapperObj.appendChild(new Child(this._childrenWrapperObj, content));\n  };\n\n\n  /**\n   * append ChildrenWrapper object\n   * @param childrenWrapperObj\n   */\n  Carousel3d.prototype.appendChildrenWrapper = function (childrenWrapperObj) {\n    this._childrenWrapperObj = childrenWrapperObj;\n    $(this.el).append(childrenWrapperObj.el);\n  };\n\n\n  /**\n   * rotate carousel\n   * @param index\n   */\n  Carousel3d.prototype.rotate = function (index) {\n    var numChildren = this._childrenWrapperObj.numChildren();\n    var iFloor = Math.floor(this._childrenWrapperObj.currentIndex() - numChildren / 2);\n    var iCeil = Math.ceil(this._childrenWrapperObj.currentIndex() + numChildren / 2);\n    while (index < iFloor) {\n      index += numChildren;\n    }\n    while (iCeil < index) {\n      index -= numChildren;\n    }\n\n    this._childrenWrapperObj.rotate(index);\n    window.setTimeout(function () {\n      var i = index;\n      while(i < 0) {\n        i += this._childrenWrapperObj.numChildren();\n      }\n      $(this.el).trigger('select', i % this._childrenWrapperObj.numChildren());\n    }.bind(this), this.option.animationDuration);\n  };\n\n  /**\n   * make carousel spin prev\n   */\n  Carousel3d.prototype.prev = function () {\n    this.rotate(this._childrenWrapperObj.currentIndex() - 1);\n  };\n\n  /**\n   * make carousel spin next\n   */\n  Carousel3d.prototype.next = function () {\n    this.rotate(this._childrenWrapperObj.currentIndex() + 1);\n  };\n\n\n\n  /**\n   * Exposed to jquery.\n   * @returns {*}\n   */\n  $.fn.Carousel3d = function() {\n    var self = this, opt = arguments[0], args = Array.prototype.slice.call(arguments,1), l = self.length, i = 0, ret;\n    for(i; i < l; i += 1) {\n      if (typeof opt === 'object' || typeof opt === 'undefined') {\n        self[i].Carousel3d =  new Carousel3d(self[i], opt);\n      }\n      else {\n        ret = self[i].Carousel3d[opt].apply(self[i].Carousel3d, args);\n      }\n      if (ret !== undefined) {\n        return ret;\n      }\n    }\n    return self;\n  };\n\n\n  /**\n   * initialize on load\n   */\n  $(function () {\n    $('[data-carousel-3d]').Carousel3d();\n  });\n\n})();\n","/*\n *\n *\n *\n * Copyright (c) 2015 PAIO\n * Licensed under the MIT license.\n */\n(function () {\n  \"use strict\";\n\n  var $ = window.jQuery;\n  var Modernizr = window.Modernizr;\n\n  var Child = function (childrenWrapperObj, content) {\n    this._childrenWrapperObj = childrenWrapperObj;\n    this._content = content;\n\n    //manipulate dome\n    this.el = $('<div data-child />')[0];\n    this._frame = $('<div data-child-frame />')[0];\n    this._contentWrapper = $('<div data-content-wrapper />')[0];\n    $(this.el).append(this._frame);\n    $(this._frame).append(this._contentWrapper);\n    $(this._contentWrapper).append(content);\n\n    this._hideUntilLoad();\n  };\n\n\n  Child.prototype._childrenWrapperObj = null;\n\n  Child.prototype._content = null;\n\n  Child.prototype.el = null;\n\n  Child.prototype._contentWrapper = null;\n\n  Child.prototype._hideUntilLoad = function () {\n    $(this._content).css('visibility', 'hidden');\n    $(this._contentWrapper).waitForImages(function () {\n      setTimeout(function () {\n        this._resize();\n        $(this._content).resize(this._resize.bind(this));\n        $(this.el).resize(this._resize.bind(this));\n        $(this._content).css('visibility', 'visible');\n      }.bind(this), 1);\n    }.bind(this));\n  };\n\n  Child.prototype._resize = function () {\n    $(this._contentWrapper).width($(this._content).outerWidth());\n    $(this._contentWrapper).height($(this._content).outerHeight());\n\n    var horizontalFrameDiff = $(this._frame).outerWidth() - $(this._frame).innerWidth();\n    var vertialFrameDiff = $(this._frame).outerHeight() - $(this._frame).innerHeight();\n    var horizontalScale = ($(this.el).innerWidth() - horizontalFrameDiff) / $(this._content).outerWidth();\n    var verticalScale = ($(this.el).innerHeight() - vertialFrameDiff) / $(this._content).outerHeight();\n    var scale = Math.min(horizontalScale, verticalScale);\n    var horizontalOffset = Math.floor(($(this.el).innerWidth() - horizontalFrameDiff - ($(this._content).outerWidth() * scale)) / 2);\n    var verticalOffset = Math.floor(($(this.el).innerHeight() - vertialFrameDiff - ($(this._content).outerHeight() * scale)) / 2);\n\n    $(this._frame).width($(this._content).outerWidth() * scale);\n    $(this._frame).height($(this._content).outerHeight() * scale);\n    $(this.el).css('padding-left', horizontalOffset + 'px');\n    $(this.el).css('padding-top', verticalOffset + 'px');\n    if (Modernizr.csstransforms) {\n      $(this._contentWrapper).css('transform', 'scale(' + scale + ')');\n      $(this._contentWrapper).css('-ms-transform', 'scale(' + scale + ')');\n      $(this._contentWrapper).css('-moz-transform', 'scale(' + scale + ')');\n      $(this._contentWrapper).css('-webkit-transform', 'scale(' + scale + ')');\n    }\n    else {\n      $(this._contentWrapper).css('filter', 'progid:DXImageTransform.Microsoft.Matrix(M11=' + scale + ', M12=0, M21=0, M22=' + scale + ', SizingMethod=\"auto expand\")');\n      $(this._contentWrapper).css('-ms-filter', 'progid:DXImageTransform.Microsoft.Matrix(M11=' + scale + ', M12=0, M21=0, M22=' + scale + ', SizingMethod=\"auto expand\")');\n    }\n  };\n\n\n\n\n  module.exports = Child;\n})();\n","/*\n *\n *\n *\n * Copyright (c) 2015 PAIO\n * Licensed under the MIT license.\n */\n(function () {\n  \"use strict\";\n\n  var $ = window.jQuery;\n\n  var ChildrenWrapper = function (carousel3dObj) {\n    this._carousel3dObj = carousel3dObj;\n    this.el = $('<div data-children-wrapper></div>')[0];\n    $(carousel3dObj.el).resize(this._resize.bind(this));\n  };\n\n  /**\n   * ChildrenWrapper element\n   * @type {element}\n   */\n  ChildrenWrapper.prototype.el = null;\n\n  ChildrenWrapper.prototype._carousel3dObj = null;\n\n  ChildrenWrapper.prototype._childObjArray = [];\n\n  ChildrenWrapper.prototype._currentIndex = 0;\n\n  ChildrenWrapper.prototype._tz = 0;\n\n  ChildrenWrapper.prototype._spacing = 0.05;\n\n\n  ChildrenWrapper.prototype.currentIndex = function (index) {\n    if (typeof index !== 'undefined' && typeof index !== 'object' && !isNaN(index)) {\n      this._currentIndex = index;\n    }\n    return this._currentIndex;\n  };\n\n\n  ChildrenWrapper.prototype._resize = function () {\n    this._tz = ($(this.el).outerWidth() / 2) / Math.tan(Math.PI / this._childObjArray.length);\n    this.rotate(this._currentIndex);\n  };\n\n  /**\n   * append Child object\n   * @param childObj\n   */\n  ChildrenWrapper.prototype.appendChild = function (childObj) {\n    this._childObjArray.push(childObj);\n    $(this.el).append(childObj.el);\n\n    this._resize();\n  };\n\n\n  /**\n   * return number of children\n   * @returns {Number}\n   */\n  ChildrenWrapper.prototype.numChildren = function () {\n    return this._childObjArray.length;\n  };\n\n\n  /**\n   *\n   * @param index\n   */\n  ChildrenWrapper.prototype.rotate = function (index) {\n    this.currentIndex(index);\n    var dDegree = 360 / this._childObjArray.length;\n    var childIndex = 0;\n    var childDegree = 0;\n    if (Modernizr.csstransforms3d) {\n      for (childIndex = 0; childIndex < this._childObjArray.length; childIndex += 1) {\n        childDegree = dDegree * (childIndex - index);\n        var transformText = '';\n        transformText += ' translateZ(' + -this._tz * (1 + this._spacing) + 'px)';\n        transformText += ' rotateY(' + childDegree + 'deg)';\n        transformText += ' translateZ(' + this._tz * (1 + this._spacing) + 'px)';\n\n        $(this._childObjArray[childIndex].el).css('transform', transformText);\n        $(this._childObjArray[childIndex].el).css('-ms-transform', transformText);\n        $(this._childObjArray[childIndex].el).css('-moz-transform', transformText);\n        $(this._childObjArray[childIndex].el).css('-webkit-transform', transformText);\n\n        $(this._childObjArray[childIndex].el).css('opacity', Math.cos(Math.PI / 180 * childDegree));\n        $(this._childObjArray[childIndex].el).css('z-index', Math.floor((Math.cos(Math.PI / 180 * childDegree) + 1) * 100));\n      }\n    }\n    else {\n      var width = $(this.el).width();\n      var height = $(this.el).height();\n\n      var stepFunc = function (now, tween) {\n\n        if (tween.prop === '_degree') {\n          var sin = Math.sin(Math.PI / 180 * now);\n          var cos = Math.cos(Math.PI / 180 * now);\n          var halfDegreeRange = dDegree / 2;\n          var perspectiveScale = Math.abs(Math.sin(Math.PI / 180 * (now + halfDegreeRange)) - Math.sin(Math.PI / 180 * (now - halfDegreeRange))) / (Math.sin(Math.PI / 180 * halfDegreeRange) * 2) * cos;\n          var heightScale = (cos + 1) / 2;\n          var widthScale = (perspectiveScale + 1) / 2;\n          var dx = (sin * width / 2 + (width * widthScale / 2 * sin)) / 2;\n\n          $(tween.elem).css('z-index', Math.floor((cos + 1) * 100));\n          if (Modernizr.csstransforms) {\n            $(tween.elem).css('left', dx + 'px');\n            $(tween.elem).css('opacity', cos);\n            $(tween.elem).css('transform', 'scale(' + widthScale + ', ' + heightScale + ')');\n            $(tween.elem).css('-ms-transform', 'scale(' + widthScale + ', ' + heightScale + ')');\n            $(tween.elem).css('-moz-transform', 'scale(' + widthScale + ', ' + heightScale + ')');\n            $(tween.elem).css('-webkit-transform', 'scale(' + widthScale + ', ' + heightScale + ')');\n          }\n          else {\n            $(tween.elem).css('top', Math.floor((height - height * heightScale) / 2) + 'px');\n            $(tween.elem).css('left', ((width - width * widthScale) / 2 + dx) + 'px');\n            $(tween.elem).css('filter', 'progid:DXImageTransform.Microsoft.Matrix(M11=' + widthScale + ', M12=0, M21=0, M22=' + heightScale + '), progid:DXImageTransform.Microsoft.Alpha(Opacity=' + cos * 100 + ')');\n            $(tween.elem).css('-ms-filter', 'progid:DXImageTransform.Microsoft.Matrix(M11=' + widthScale + ', M12=0, M21=0, M22=' + heightScale + '), progid:DXImageTransform.Microsoft.Alpha(Opacity=' + cos * 100 + ')');\n          }\n        }\n      };\n\n      for (childIndex = 0; childIndex < this._childObjArray.length; childIndex += 1) {\n        childDegree = dDegree * (childIndex - index);\n\n        $(this._childObjArray[childIndex].el).animate({\n          '_degree': childDegree\n        }, {\n          duration: this._carousel3dObj.option.animationDuration,\n          step: stepFunc.bind(this)\n        });\n      }\n    }\n\n  };\n\n  module.exports = ChildrenWrapper;\n})();\n","(function () {\n  \"use strict\";\n  var originalResize = $.fn.resize;\n  //TODO IE call resize infinite. patch jquery.resize then replace\n  $.fn.resize = function (callback) {\n    var width = $(this).width();\n    var height = $(this).height();\n    originalResize.call(this, function () {\n      if ($(this).width() !== width || $(this).height() !== height) {\n        width = $(this).width();\n        height = $(this).height();\n        callback(this);\n      }\n    }.bind(this));\n  };\n})();\n"]}